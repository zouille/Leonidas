/*
 * jQuery Form Styler v1.3.4
 * http://dimox.name/jquery-form-styler/
 *
 * Copyright 2012-2013 Dimox (http://dimox.name/)
 * Released under the MIT license.
 *
 * Date: 2013.03.03
 *
 */
!function(a){a.fn.styler=function(b){var b=a.extend({idSuffix:"-styler",browseText:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c",selectVisibleOptions:0,singleSelectzIndex:"100",selectSmartPositioning:!0},b);return this.each(function(){var c=a(this),d="",e="",f="";void 0!==c.attr("id")&&""!=c.attr("id")&&(d=' id="'+c.attr("id")+b.idSuffix+'"'),void 0!==c.attr("class")&&""!=c.attr("class")&&(e=" "+c.attr("class"));var g=c.data();for(var h in g)""!=g[h]&&(f+=" data-"+h+'="'+g[h]+'"');d+=f,c.is(":checkbox")?c.css({position:"absolute",left:-9999}).each(function(){if(c.next("span.jq-checkbox").length<1){var b=a("<span"+d+' class="jq-checkbox'+e+'" style="display: inline-block"><span></span></span>');c.after(b),c.is(":checked")&&b.addClass("checked"),c.is(":disabled")&&b.addClass("disabled"),b.click(function(){return b.is(".disabled")?void 0:(c.is(":checked")?(c.prop("checked",!1),b.removeClass("checked")):(c.prop("checked",!0),b.addClass("checked")),c.change(),!1)}),c.parent("label").add('label[for="'+c.attr("id")+'"]').click(function(a){b.click(),a.preventDefault()}),c.change(function(){c.is(":checked")?b.addClass("checked"):b.removeClass("checked")}).keydown(function(a){!c.parent("label").length||13!=a.which&&32!=a.which||b.click()}).focus(function(){b.is(".disabled")||b.addClass("focused")}).blur(function(){b.removeClass("focused")}),c.on("refresh",function(){c.is(":checked")?b.addClass("checked"):b.removeClass("checked"),c.is(":disabled")?b.addClass("disabled"):b.removeClass("disabled")})}}):c.is(":radio")?c.css({position:"absolute",left:-9999}).each(function(){if(c.next("span.jq-radio").length<1){var b=a("<span"+d+' class="jq-radio'+e+'" style="display: inline-block"><span></span></span>');c.after(b),c.is(":checked")&&b.addClass("checked"),c.is(":disabled")&&b.addClass("disabled"),b.click(function(){return b.is(".disabled")?void 0:(a('input[name="'+c.attr("name")+'"]').prop("checked",!1).next().removeClass("checked"),c.prop("checked",!0).next().addClass("checked"),c.change(),!1)}),c.parent("label").add('label[for="'+c.attr("id")+'"]').click(function(a){b.click(),a.preventDefault()}),c.change(function(){a('input[name="'+c.attr("name")+'"]').next().removeClass("checked"),c.next().addClass("checked")}).focus(function(){b.is(".disabled")||b.addClass("focused")}).blur(function(){b.removeClass("focused")}),c.on("refresh",function(){c.is(":checked")?(a('input[name="'+c.attr("name")+'"]').next().removeClass("checked"),b.addClass("checked")):b.removeClass("checked"),c.is(":disabled")?b.addClass("disabled"):b.removeClass("disabled")})}}):c.is(":file")?c.css({position:"absolute",top:"-50%",right:"-50%",fontSize:"200px",opacity:0}).each(function(){if(c.parent("span.jq-file").length<1){var f=a("<span"+d+' class="jq-file'+e+'" style="display: inline-block; position: relative; overflow: hidden"></span>'),g=a('<div class="name" style="float: left; white-space: nowrap"></div>').appendTo(f);a('<div class="browse" style="float: left">'+b.browseText+"</div>").appendTo(f),c.after(f),f.append(c),c.is(":disabled")&&f.addClass("disabled"),c.change(function(){g.text(c.val().replace(/.+[\\\/]/,""))}).focus(function(){f.addClass("focused")}).blur(function(){f.removeClass("focused")}).click(function(){f.removeClass("focused")}).on("refresh",function(){c.is(":disabled")?f.addClass("disabled"):f.removeClass("disabled")})}}):c.is("select")&&c.each(function(){function f(){function f(b){b.bind("mousewheel DOMMouseScroll",function(b){var c=null;"mousewheel"==b.type?c=-1*b.originalEvent.wheelDelta:"DOMMouseScroll"==b.type&&(c=40*b.originalEvent.detail),c&&(b.preventDefault(),a(this).scrollTop(c+a(this).scrollTop()))})}function j(){for(h=0;h<g.length;h++){var a="",b="",c="",d="",e="disabled",f="selected sel disabled";g.eq(h).prop("selected")&&(b="selected sel"),g.eq(h).is(":disabled")&&(b=e),g.eq(h).is(":selected:disabled")&&(b=f),void 0!==g.eq(h).attr("class")&&(c=" "+g.eq(h).attr("class")),a='<li class="'+b+c+'">'+g.eq(h).text()+"</li>",g.eq(h).parent().is("optgroup")&&(void 0!==g.eq(h).parent().attr("class")&&(d=" "+g.eq(h).parent().attr("class")),a='<li class="'+b+c+" option"+d+'">'+g.eq(h).text()+"</li>",g.eq(h).is(":first-child")&&(a='<li class="optgroup'+d+'">'+g.eq(h).parent().attr("label")+"</li>"+a)),i+=a}}function k(){var h=a("<span"+d+' class="jq-selectbox jqselect'+e+'" style="display: inline-block; position: relative; z-index:'+b.singleSelectzIndex+'">'+'<div class="select" style="float: left"><div class="text"></div>'+'<b class="trigger"><i class="arrow"></i></b>'+"</div>"+"</span>");c.after(h).css({position:"absolute",left:-9999});var k=a("div.select",h),l=a("div.text",h),m=g.filter(":selected");if(m.length?l.text(m.text()):l.text(g.first().text()),c.is(":disabled"))h.addClass("disabled");else{j();var n=a('<div class="dropdown" style="position: absolute; overflow: auto; overflow-x: hidden"><ul style="list-style: none">'+i+"</ul>"+"</div>");h.append(n);var o=a("li",n);o.filter(".selected").length<1&&o.first().addClass("selected sel");var p=h.outerHeight();"auto"==n.css("left")&&n.css({left:0}),"auto"==n.css("top")&&n.css({top:p});var q=o.outerHeight(),r=n.css("top");n.hide(),k.click(function(){if(c.focus(),b.selectSmartPositioning){var d=a(window),e=h.offset().top,g=d.height()-p-(e-d.scrollTop()),i=b.selectVisibleOptions,j=6*q,k=q*i;i>0&&6>i&&(j=k),0>g||j>g?(n.height("auto").css({top:"auto",bottom:r}),n.outerHeight()>e-d.scrollTop()-20&&(n.height(Math.floor((e-d.scrollTop()-20)/q)*q),i>0&&6>i?n.height()>j&&n.height(j):i>6&&n.height()>k&&n.height(k))):g>j&&(n.height("auto").css({bottom:"auto",top:r}),n.outerHeight()>g-20&&(n.height(Math.floor((g-20)/q)*q),i>0&&6>i?n.height()>j&&n.height(j):i>6&&n.height()>k&&n.height(k)))}return a("span.jqselect").css({zIndex:b.singleSelectzIndex-1}).removeClass("focused"),h.css({zIndex:b.singleSelectzIndex}),n.is(":hidden")?(a("div.dropdown:visible").hide(),n.show(),h.addClass("opened")):(n.hide(),h.removeClass("opened")),o.filter(".selected").length&&n.scrollTop(n.scrollTop()+o.filter(".selected").position().top-n.innerHeight()/2+q/2),f(n),!1}),o.hover(function(){a(this).siblings().removeClass("selected")});var s=o.filter(".selected").text();o.filter(":not(.disabled):not(.optgroup)").click(function(){var b=a(this),d=b.text();if(s!=d){var e=b.index();b.is(".option")&&(e-=b.prevAll(".optgroup").length),b.addClass("selected sel").siblings().removeClass("selected sel"),g.prop("selected",!1).eq(e).prop("selected",!0),s=d,l.text(d),c.change()}n.hide()}),n.mouseout(function(){a("li.sel",n).addClass("selected")}),c.change(function(){l.text(g.filter(":selected").text()),o.removeClass("selected sel").not(".optgroup").eq(c[0].selectedIndex).addClass("selected sel")}).focus(function(){h.addClass("focused")}).blur(function(){h.removeClass("focused")}).bind("keydown keyup",function(a){l.text(g.filter(":selected").text()),o.removeClass("selected sel").not(".optgroup").eq(c[0].selectedIndex).addClass("selected sel"),(38==a.which||37==a.which||33==a.which)&&n.scrollTop(n.scrollTop()+o.filter(".selected").position().top),(40==a.which||39==a.which||34==a.which)&&n.scrollTop(n.scrollTop()+o.filter(".selected").position().top-n.innerHeight()+q),13==a.which&&n.hide()}),a(document).on("click",function(b){a(b.target).parents().hasClass("selectbox")||"OPTION"==b.target.nodeName||(n.hide().find("li.sel").addClass("selected"),h.removeClass("focused opened"))})}}function l(){var b=a("<span"+d+' class="jq-select-multiple jqselect'+e+'" style="display: inline-block"></span>');c.after(b).css({position:"absolute",left:-9999}),j(),b.append('<ul style="position: relative">'+i+"</ul>");var h=a("ul",b),k=a("li",b).attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none"}),l=c.attr("size"),m=h.outerHeight(),n=k.outerHeight();void 0!==l&&l>0?h.css({height:n*l}):h.css({height:4*n}),m>b.height()&&(h.css("overflowY","scroll"),f(h),k.filter(".selected").length&&h.scrollTop(h.scrollTop()+k.filter(".selected").position().top)),c.is(":disabled")?(b.addClass("disabled"),g.each(function(){a(this).is(":selected")&&k.eq(a(this).index()).addClass("selected")})):(k.filter(":not(.disabled):not(.optgroup)").click(function(d){c.focus(),b.removeClass("focused");var e=a(this);if(d.ctrlKey||e.addClass("selected"),d.shiftKey||e.addClass("first"),d.ctrlKey||d.shiftKey||e.siblings().removeClass("selected first"),d.ctrlKey&&(e.is(".selected")?e.removeClass("selected first"):e.addClass("selected first"),e.siblings().removeClass("first")),d.shiftKey){var f=!1,h=!1;e.siblings().removeClass("selected").siblings(".first").addClass("selected"),e.prevAll().each(function(){a(this).is(".first")&&(f=!0)}),e.nextAll().each(function(){a(this).is(".first")&&(h=!0)}),f&&e.prevAll().each(function(){return a(this).is(".selected")?!1:(a(this).not(".disabled, .optgroup").addClass("selected"),void 0)}),h&&e.nextAll().each(function(){return a(this).is(".selected")?!1:(a(this).not(".disabled, .optgroup").addClass("selected"),void 0)}),1==k.filter(".selected").length&&e.addClass("first")}g.prop("selected",!1),k.filter(".selected").each(function(){var b=a(this),c=b.index();b.is(".option")&&(c-=b.prevAll(".optgroup").length),g.eq(c).prop("selected",!0)}),c.change()}),g.each(function(b){a(this).data("optionIndex",b)}),c.change(function(){k.removeClass("selected");var b=[];g.filter(":selected").each(function(){b.push(a(this).data("optionIndex"))}),k.not(".optgroup").filter(function(c){return a.inArray(c,b)>-1}).addClass("selected")}).focus(function(){b.addClass("focused")}).blur(function(){b.removeClass("focused")}),m>b.height()&&c.keydown(function(a){(38==a.which||37==a.which||33==a.which)&&h.scrollTop(h.scrollTop()+k.filter(".selected").position().top-n),(40==a.which||39==a.which||34==a.which)&&h.scrollTop(h.scrollTop()+k.filter(".selected:last").position().top-h.innerHeight()+2*n)}))}var g=a("option",c),i="";c.is("[multiple]")?l():k()}c.next("span.jqselect").length<1&&(f(),c.on("refresh",function(){c.next().remove(),f()}))})})}}(jQuery);